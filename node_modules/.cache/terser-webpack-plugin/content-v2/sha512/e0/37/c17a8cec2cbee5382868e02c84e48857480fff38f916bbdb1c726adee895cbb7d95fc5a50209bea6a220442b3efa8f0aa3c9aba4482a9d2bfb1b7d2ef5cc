{"code":"!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=0)}([function(e,r,t){const n=t(1),{URLSearchParams:o}=t(2),a={\"affordable-housing\":\"affordable housing development with practical, cost-effective design\",flat:\"modern apartment or flat building with multiple residential units\",\"communal-space\":\"community center or shared public space for gatherings\",\"detached-house\":\"single-family detached residential house\",\"terraced-house\":\"row house or terraced housing in a connected series\",\"commercial-building\":\"office or retail commercial building\",\"mixed-use\":\"mixed-use development combining residential and commercial spaces\"};r.handler=async(e,r)=>{const t={\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Headers\":\"Content-Type\",\"Access-Control-Allow-Methods\":\"POST, OPTIONS\"};if(\"OPTIONS\"===e.httpMethod)return{statusCode:200,headers:t,body:\"\"};if(\"POST\"!==e.httpMethod)return{statusCode:405,headers:t,body:JSON.stringify({error:\"Method not allowed\"})};try{const{image:r,type:o}=JSON.parse(e.body);if(!r||!o)return{statusCode:400,headers:t,body:JSON.stringify({error:\"Missing image or type parameter\"})};const s=`Create an architectural sketch drawing of a ${a[o]||o} in the same architectural style as the reference image. The sketch should be:\\n    - A professional architectural drawing style\\n    - Black and white line drawing\\n    - Show the building's facade and key architectural features\\n    - Maintain the same architectural style, materials, and design language as the reference\\n    - Include architectural details like windows, doors, rooflines, and structural elements\\n    - Clean, professional presentation suitable for architectural bid documentation`;console.log(\"Generating image with prompt:\",s);const i=await async function(e){return new Promise((r,t)=>{const o=JSON.stringify({model:\"dall-e-3\",prompt:e,n:1,size:\"1024x1024\",quality:\"standard\",style:\"natural\"}),a={hostname:\"api.openai.com\",port:443,path:\"/v1/images/generations\",method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+process.env.OPENAI_API_KEY,\"Content-Length\":o.length}},s=n.request(a,e=>{let t=\"\";e.on(\"data\",e=>{t+=e}),e.on(\"end\",()=>{try{const o=JSON.parse(t);var n;if(200===e.statusCode)r({success:!0,imageUrl:o.data[0].url});else r({success:!1,error:(null===(n=o.error)||void 0===n?void 0:n.message)||\"Unknown error from OpenAI API\"})}catch(e){r({success:!1,error:\"Error parsing OpenAI response\"})}})});s.on(\"error\",e=>{r({success:!1,error:e.message})}),s.write(o),s.end()})}(s);if(!i.success)throw new Error(i.error);return{statusCode:200,headers:t,body:JSON.stringify({success:!0,imageUrl:i.imageUrl,prompt:s})}}catch(e){return console.error(\"Error generating sketch:\",e),{statusCode:500,headers:t,body:JSON.stringify({error:\"Failed to generate sketch\",details:e.message})}}}},function(e,r){e.exports=require(\"https\")},function(e,r){e.exports=require(\"url\")}]));","extractedComments":[]}